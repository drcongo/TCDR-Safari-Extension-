<script type="text/javascript">
    function performCommand(event)
    {
        if (event.command === "tcdr") {
            safari.application.activeBrowserWindow.activeTab.page.dispatchMessage("tcdr");
        }
    }


    function validateCommand(event)
    {
        if (event.command === "tcdr") {
            // Disable the button if there is no URL loaded in the tab.
            event.target.disabled = !event.target.browserWindow.activeTab.url;
        }
    }

    safari.application.addEventListener("command", performCommand, false);
    safari.application.addEventListener("validate", validateCommand, false);

</script>
